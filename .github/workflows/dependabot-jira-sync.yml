name: Sync dependabot to Jira
on:
  schedule:
    - cron: '0 */8 * * *'
  workflow_dispatch:

jobs:
  jira:
    runs-on: ubuntu-latest
    permissions:
      pull-requests: read
    steps:
      - name: Dependabot JIRA Action
        uses: Khairajani/dependabot-jira-action@add_to_issue
        with:
          jiraIssueLabel: dependabot
          jiraProjectKey: SCRUM
          jiraIssueType: Bug
          githubRepo: dependabot-jira-action
          githubOwner: Khairajani
        env:
          JIRA_SUBDOMAIN: ${{ secrets.JIRA_PROJECT_URL }}
          JIRA_USER_EMAIL: ${{ secrets.JIRA_EMAIL }}
          JIRA_API_TOKEN: ${{ secrets.JIRA_TOKEN }}
          GITHUB_API_TOKEN: ${{ secrets.PERSONAL_ACCESS_TOKEN }}